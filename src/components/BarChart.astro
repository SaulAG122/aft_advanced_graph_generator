---
interface Competencia {
  titulo: string;
  valor: number;
  minimo: number;
  maximo: number;
  descripcion: string;
}

const chartData: Competencia[] = [
  {
    titulo: "Atención a los detalles",
    valor: 1,
    minimo: 1,
    maximo: 10,
    descripcion: "Disfrute, interés y habilidad para verificar y revisar.",
  },
  {
    titulo: "Capacidad de análisis",
    valor: 8,
    minimo: 1,
    maximo: 10,
    descripcion:
      "Inclinación hacia el análisis de datos y la comprensión de hechos.",
  },
  {
    titulo: "Conformidad",
    valor: 4,
    minimo: 1,
    maximo: 10,
    descripcion:
      "Preferencia por las reglas y los procedimientos establecidos.",
  },
  {
    titulo: "Foco en el resultado",
    valor: 6,
    minimo: 1,
    maximo: 10,
    descripcion: "Enfoque, claridad y seguimiento a las metas del trabajo.",
  },
  {
    titulo: "Proactividad",
    valor: 5,
    minimo: 1,
    maximo: 10,
    descripcion: "Acción rápida. Mejorar el trabajo. Solucionar problemas.",
  },
  {
    titulo: "Razonamiento matemático",
    valor: 4,
    minimo: 1,
    maximo: 10,
    descripcion:
      "Interés o habilidad hacia el trabajo con información cuantitativa.",
  },
  {
    titulo: "Ambición",
    valor: 4,
    minimo: 1,
    maximo: 10,
    descripcion:
      "Ser competitivo. Alcanzar reconocimiento y/o puestos de autoridad.",
  },
  {
    titulo: "Innovación",
    valor: 8,
    minimo: 1,
    maximo: 10,
    descripcion: "Generar ideas y soluciones creativas.",
  },
  {
    titulo: "Orientación hacia el cliente",
    valor: 5,
    minimo: 1,
    maximo: 10,
    descripcion:
      "Propensión y compromiso hacia la atención y el servicio al cliente.",
  },
  {
    titulo: "Planificación-organización",
    valor: 6,
    minimo: 1,
    maximo: 10,
    descripcion: "Planear el trabajo. Mantenerse organizado.",
  },
  {
    titulo: "Toma de decisiones",
    valor: 8,
    minimo: 1,
    maximo: 10,
    descripcion: "Facilidad y confianza para tomar decisiones.",
  },
  {
    titulo: "Visión estratégica",
    valor: 10,
    minimo: 1,
    maximo: 10,
    descripcion: "Comprender el entorno. Anticipar escenarios y posibilidades.",
  },
  {
    titulo: "Autocontrol",
    valor: 9,
    minimo: 1,
    maximo: 10,
    descripcion: "Capacidad para mantener la calma y el dominio emocional.",
  },
];

function getBarColor(titulo: string): string {
  const red = [
    "Atención a los detalles",
    "Capacidad de análisis",
    "Conformidad",
    "Foco en el resultado",
    "Proactividad",
    "Razonamiento matemático",
  ];
  const green = [
    "Ambición",
    "Innovación",
    "Orientación hacia el cliente",
    "Planificación-organización",
    "Toma de decisiones",
    "Visión estratégica",
  ];
  const blue = ["Autocontrol"];

  if (red.includes(titulo)) return "#bf4828";
  if (green.includes(titulo)) return "#046659";
  if (blue.includes(titulo)) return "#2e58a4";
  return "#6b7280";
}

function calculatePercentage(
  valor: number,
  minimo: number,
  maximo: number
): number {
  return ((valor) / 10) * 100;
}
---

<div class:list={["w-full", "max-w-5xl", "mx-auto", "p-6", "bg-white"]}>
  <div class:list={["space-y-6"]}>
    {
      chartData.map((item) => (
        <div
          class:list={[
            "flex",
            "flex-col",
            "sm:flex-row",
            "gap-4",
            "items-start",
            "sm:items-center",
          ]}
        >
          <div class:list={["w-1/2"]}> 
            <h3
              class:list={["font-bold", "text-sm"]}
              style={`color: ${getBarColor(item.titulo)}`}
            >
              {item.titulo}
            </h3>
            <p class:list={["text-xs", "font-semibold","text-black", "leading-tight"]}>
              {item.descripcion}
            </p>
          </div>

<div class:list={["w-1/2"]}>
            <div class:list={["flex", "items-center", "gap-2"]}>
              <div
                class:list={[
                  "flex",
                  "flex-col",
                  "items-center",
                  "text-xs",
                  "text-gray-500",
                ]}
              >

              </div>

              <div class:list={["flex-1", "relative"]}>
                <div
                  class:list={["w-full", "bg-gray-200", "rounded-lg", "h-8"]}
                >
                  <div
                    class:list={[
                      "h-full",
                      "rounded-md",
                      "transition-all",
                      "duration-500",
                      "ease-out",
                      "relative",
                    ]}
                    style={`width: ${calculatePercentage(item.valor, item.minimo, item.maximo)}%; background-color: ${getBarColor(item.titulo)}`}
                  >
                    <div
                      class:list={[
                        "absolute",
                        "right-0",
                        "top-1/2",
                        "-translate-y-1/2",
                        "bg-white",
                        "px-2",
                        "border-4",
                        "py-2",
                        "text-black",
                        "font-bold",
                        "text-sm",
                        "rounded-md",
                      ]}
                      style={`border-color: ${getBarColor(item.titulo)}`}
                    >
                      {item.valor}
                    </div>
                  </div>
                </div>
                  <!-- red lines (centrada) -->
                  <div 
                    class:list={["absolute", "top-1/2", "-translate-y-12", "h-3", "w-1", "bg-red-500", "z-10"]}
                    style={`left: ${((4 - 0.5) / 10) * 100}%;`}
                  ></div>
                  <div 
                    class:list={["absolute", "top-1/2", "-translate-y-6", "h-1", "w-1", "bg-red-500", "z-10"]}
                    style={`left: ${((4 - 0.5) / 10) * 100}%;`}
                  ></div>

                  <!-- yellow lines -->
                  <div 
                    class:list={["absolute", "top-1/2", "-translate-y-12", "h-3", "w-1", "bg-yellow-500", "z-10"]}
                    style={`left: ${((7 - 0.5) / 10) * 100}%;`}
                  ></div>
                  <div 
                    class:list={["absolute", "top-1/2", "-translate-y-6", "h-1", "w-1", "bg-yellow-500", "z-10"]}
                    style={`left: ${((7 - 0.5) / 10) * 100}%;`}
                  ></div>

                  <!-- green lines-->
                  <div 
                    class:list={["absolute", "top-1/2", "-translate-y-12", "h-3", "w-1", "bg-green-500", "z-10"]}
                    style={`left: ${((10 - 0.5) / 10) * 100}%;`}
                  ></div>
                  <div 
                    class:list={["absolute", "top-1/2", "-translate-y-6", "h-1", "w-1", "bg-green-500", "z-10"]}
                    style={`left: ${((10 - 0.5) / 10) * 100}%;`}
                  ></div>
                <div
                  class:list={[
                    "flex",
                    "justify-between",
                    "text-xs",
                    "text-gray-400",
                    "mt-1",
                  ]}
                />
              </div>

              <div
                class:list={[
                  "flex",
                  "flex-col",
                  "items-center",
                  "text-xs",
                  "text-gray-500",
                ]}
              >
              </div>
            </div>
          </div>
        </div>
      ))
    }
  </div>
</div>
